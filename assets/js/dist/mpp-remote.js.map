{"version":3,"file":"./assets/js/dist/mpp-remote.js","mappings":"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","sources":["webpack://mediapress/./assets/js/mpp-remote.js","webpack://mediapress/external window \"jQuery\"","webpack://mediapress/webpack/bootstrap","webpack://mediapress/webpack/runtime/compat get default export","webpack://mediapress/webpack/runtime/define property getters","webpack://mediapress/webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["\nimport jQuery from 'jquery';\n\n(function ($){\n\n    $(function () {\n        const utils = mpp.mediaUtils;\n\n        let uploadedItemBuilder = _.template(\"<li class='mpp-uploaded-media-item mpp-remote-uploaded-media-item' id='mpp-uploaded-media-item-<%= id %>' data-media-id='<%= id %>'><a href='<%=  permalink %>'><img src='<%= thumb_url %>' /></a><a href='#' class='mpp-delete-uploaded-media-item'>x</a></li>\"),\n            embeddedItemBuilder = _.template(\"<li class='mpp-uploaded-media-item mpp-remote-uploaded-media-item mpp-remote-uploaded-media-item mpp-remote-uploaded-media-item-type-<%= remote_type %>' id='mpp-uploaded-media-item-<%= id %>' data-media-id='<%= id %>'><%= html %><a href='#' class='mpp-delete-uploaded-media-item'>x</a></li>\"),\n            uploadingFeedback = _.template(\"<li id='<%= id %>'><span class='mpp-remote-url-name'><%= url %></span><span class='mpp-remove-remote-media'>x</span> <b></b></li>\"),\n            $remoteInput,\n            $container;\n\n        // on click of the Add button.\n        $(document).on('click', '.mpp-add-remote-media', function () {\n            // clear notices.\n            mpp.clearNotice();\n\n            var $this = $(this);\n            var context = '';//context defines from where it was uploaded\n            var galleryID = 0;\n            var rId = randomID();\n            var $gallery = $('#mpp-upload-gallery-id');\n\n            if ($gallery.get(0)) {\n                galleryID = $gallery.val();\n            }\n\n            $container = $this.parents('.mpp-new-media-container');\n            $remoteInput = $container.find('input.mpp-remote-media-url');\n            if (!$remoteInput.get(0) || $remoteInput.val().trim() === \"\") {\n                mpp.notify(_mppUploadSettings.empty_url_message, 'error');\n                return false;\n            }\n\n            var $context = $container.find('.mpp-context');\n            if ($context.get(0)) {\n                context = $context.val();\n            }\n\n            var url = $remoteInput.val();\n\n            var $uploadingList = $container.find('.mpp-uploading-media-list ul');\n            $uploadingList.find('.mpp-loader').show();\n\n            var $feedback = $container.find('.mpp-remote-media-upload-feedback ul');\n\n            var trimmedURL = url.length > 20 ? url.substr(0, 20) + '...' : url;\n\n            $feedback.append(uploadingFeedback({id: rId, url: trimmedURL}));\n            $remoteInput.val(\"\");\n            $.post(ajaxurl, {\n                'action': 'mpp_add_remote_media',\n                'url': url,\n                'gallery_id': galleryID,\n                'context': context,\n                '_wpnonce': $container.find('#mpp-remote-media-nonce').val()\n\n            }, function (response) {\n                $uploadingList.find('.mpp-loader').hide();\n                var $li = $feedback.find('li#' + rId);\n                $li.remove();\n                if (response.success) {\n                   utils.addAttachedMedia($container, response.data.id);\n                    var data = response.data;\n                    if (data.is_oembed) {\n                        $uploadingList.append(embeddedItemBuilder(response.data));\n                    } else {\n                        $uploadingList.append(uploadedItemBuilder(response.data));\n                    }\n\n                } else {\n                    mpp.notify(response.data.message, 'error');\n                    // $li.find('b').text(response.data.message);\n                }\n\n            });\n\n            return false;\n        });\n\n        /// Trigger delete, deletes any trace of a Media\n        $(document).on('click', '.mpp-uploading-media-list .mpp-delete-uploaded-media-item', function () {\n\n            let $this = $(this),\n                $parent = $this.parent(),\n                $container = $this.parents('.mpp-new-media-container'),\n                id = $parent.data('media-id');\n\n            if (!id) {\n                return false;\n            }\n\n            let $img = $parent.find('img'),\n                old_image = $img.attr('src');\n            //set the loader icon as source\n\n            $img.attr('src', _mppSettings.loader_src);\n            $this.hide();// no delete button.\n\n            var nonce = $('#_mpp_manage_gallery_nonce').val();\n\n            $.post(ajaxurl, {\n                action: 'mpp_delete_media',\n                media_id: id,\n                cookie: encodeURIComponent(document.cookie),\n                _wpnonce: nonce\n            }, function (response) {\n\n                if (typeof  response.success !== \"undefined\") {\n                    $parent.remove(); //can't believe the parent is going away too\n                    if(mpp.mediaUtils ) {\n                        mpp.mediaUtils.removeAttachedMedia($container, id);\n                    }\n                    mpp.notify(response.message);\n\n                } else {\n\n                    $this.show();\n                    $img.attr('src', old_image);\n\n                    mpp.notify(response.message);\n                }\n\n            }, 'json');\n\n            return false;\n        });\n\n        /**\n         * Get random ID.\n         *\n         * Credit: https://gist.github.com/6174/6062387\n         * @returns {string}\n         */\n        function randomID() {\n            return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n        }\n    });\n})(jQuery);\n\n","module.exports = window[\"jQuery\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }"],"names":["$","module","exports","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","jQuery","utils","mpp","mediaUtils","$remoteInput","$container","uploadedItemBuilder","_","template","embeddedItemBuilder","uploadingFeedback","document","on","clearNotice","$this","this","context","galleryID","rId","Math","random","toString","substring","$gallery","val","parents","find","trim","notify","_mppUploadSettings","empty_url_message","$context","url","$uploadingList","show","$feedback","trimmedURL","length","substr","append","id","post","ajaxurl","response","hide","remove","success","addAttachedMedia","data","is_oembed","message","$parent","parent","$img","old_image","attr","_mppSettings","loader_src","nonce","action","media_id","cookie","encodeURIComponent","_wpnonce","removeAttachedMedia"],"sourceRoot":""}