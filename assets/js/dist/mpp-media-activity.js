!function(){var t={41:function(){void 0===jQuery.cookie&&(jQuery.cookie=function(t,e,a){if(void 0===e){var i=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),s=0;s<n.length;s++){var p=jQuery.trim(n[s]);if(p.substring(0,t.length+1)==t+"="){i=decodeURIComponent(p.substring(t.length+1));break}}return i}a=a||{},null===e&&(e="",a.expires=-1);var o,r="";a.expires&&("number"==typeof a.expires||a.expires.toUTCString)&&("number"==typeof a.expires?(o=new Date).setTime(o.getTime()+24*a.expires*60*60*1e3):o=a.expires,r="; expires="+o.toUTCString());var l=a.path?"; path="+a.path:"",d=a.domain?"; domain="+a.domain:"",c=a.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),r,l,d,c].join("")})},567:function(t){"use strict";t.exports=window.jQuery}},e={};function a(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,a),s.exports}a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,{a:e}),e},a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t=a(567),e=a.n(t);a(41),function(t){function e(){let e=document.cookie.split(";"),a={};for(let i=0;i<e.length;i++){let n=e[i],s=n.indexOf("="),p=t.trim(unescape(n.slice(0,s))),o=unescape(n.slice(s+1));0==p.indexOf("bp-")&&(a[p]=o)}return encodeURIComponent(t.param(a))}t(document).ready((function(){t(document).on("focus","#mpp-whats-new",(function(){t("#mpp-whats-new-options").animate({height:"50px"}),t("#mpp-aw-whats-new-submit").prop("disabled",!1);let e=t("form#mpp-whats-new-form");e.hasClass("submitted")&&e.removeClass("submitted")})),t(document).on("blur","#mpp-whats-new",(function(){this.value.match(/\S+/)||(this.value="",t("#mpp-whats-new-options").animate({height:"0"}),t("#mpp-aw-whats-new-submit").prop("disabled",!0))})),t(document).on("click","input#mpp-aw-whats-new-submit",(function(){let a="",i=t(this),n=i.closest("form#mpp-whats-new-form");n.children().each((function(){(t.nodeName(this,"textarea")||t.nodeName(this,"input"))&&t(this).prop("disabled",!0)})),t("div.error").remove(),i.addClass("loading"),i.prop("disabled",!0),n.addClass("submitted");let s="",p=n.find("#mpp-whats-new-post-in").val(),o=n.find("textarea#mpp-whats-new").val();p>0&&(s=n.find("#mpp-whats-new-post-object").val());let r=t(n).find("#mpp-activity-type").val(),l=t(n).find("#mpp-item-id").val();return t.post(ajaxurl,{action:"mpp_add_comment",cookie:e(),_wpnonce_post_update:n.find("input#_wpnonce_post_update").val(),content:o,object:s,item_id:p,"mpp-id":l,"mpp-type":r,_bp_as_nonce:t("#_bp_as_nonce").val()||""},(function(e){n.children().each((function(){(t.nodeName(this,"textarea")||t.nodeName(this,"input"))&&t(this).prop("disabled",!1)})),i.prop("disabled",!1),e[0]+e[1]=="-1"?(n.prepend(e.substr(2,e.length)),t("form#"+n.attr("id")+" div.error").hide().fadeIn(200)):(a=t(n.parents(".mpp-activity").get(0)),0===a.find("ul.mpp-activity-list").length&&(t("div.error").slideUp(100).remove(),t("div#message").slideUp(100).remove(),a.append('<ul id="mpp-activity-stream" class="mpp-activity-list item-list">')),a.find("ul#mpp-activity-stream").prepend(e),a.find("ul#mpp-activity-stream li:first").addClass("new-update just-posted"),n.find("textarea#mpp-whats-new").val("")),n.find("#mpp-whats-new-options").animate({height:"0px"}),n.find("textarea").animate({height:"20px"}),n.find("#mpp-whats-new-submit").prop("disabled",!1).removeClass("loading")})),!1})),t(document).on("click","div.mpp-activity",(function(a){let i,n,s,p,o,r,l,d,c,m,u,h,v=t(a.target);if(v.hasClass("fav")||v.hasClass("unfav"))return i=v.hasClass("fav")?"fav":"unfav",n=v.closest(".activity-item"),s=n.attr("id").substr(9,n.attr("id").length),v.addClass("loading"),t.post(ajaxurl,{action:"activity_mark_"+i,cookie:e(),id:s},(function(e){v.removeClass("loading"),v.fadeOut(200,(function(){t(this).html(e),t(this).attr("title","fav"===i?_mppStrings.remove_fav:_mppStrings.mark_as_fav),t(this).fadeIn(200)})),"fav"===i&&(t(".item-list-tabs #activity-favs-personal-li").length||(t(".item-list-tabs #activity-favorites").length||t(".item-list-tabs ul #activity-mentions").before('<li id="activity-favorites"><a href="#">'+_mppStrings.my_favs+" <span>0</span></a></li>"),t(".item-list-tabs ul #activity-favorites span").html(Number(t(".item-list-tabs ul #activity-favorites span").html())+1)),v.removeClass("fav"),v.addClass("unfav"))})),!1;if(v.hasClass("delete-activity"))return p=v.parents("div.mpp-activity ul li"),o=p.attr("id").substr(9,p.attr("id").length),r=v.attr("href"),l=r.split("_wpnonce="),d=p.prop("class").match(/date-recorded-([0-9]+)/),l=l[1],v.addClass("loading"),t.post(ajaxurl,{action:"delete_activity",cookie:e(),id:o,_wpnonce:l},(function(t){t[0]+t[1]==="-1"?(p.prepend(t.substr(2,t.length)),p.children("#message").hide().fadeIn(300)):(p.slideUp(300),d&&activity_last_recorded===d[1]&&(newest_activities="",activity_last_recorded=0))})),!1;if(v.hasClass("spam-activity"))return p=v.parents("div.mpp-activity ul li"),d=p.prop("class").match(/date-recorded-([0-9]+)/),v.addClass("loading"),t.post(ajaxurl,{action:"bp_spam_activity",cookie:encodeURIComponent(document.cookie),id:p.attr("id").substr(9,p.attr("id").length),_wpnonce:v.attr("href").split("_wpnonce=")[1]},(function(t){t[0]+t[1]==="-1"?(p.prepend(t.substr(2,t.length)),p.children("#message").hide().fadeIn(300)):(p.slideUp(300),d&&activity_last_recorded===d[1]&&(newest_activities="",activity_last_recorded=0))})),!1;if(v.parent().hasClass("mpp-load-more"))return bp_ajax_request&&bp_ajax_request.abort(),v.parent().find(".mpp-load-more").addClass("loading"),null===t.cookie("bp-activity-oldestpage")&&t.cookie("bp-activity-oldestpage",1,{path:"/"}),c=1*t.cookie("bp-activity-oldestpage")+1,m=[],t(".mpp-activity-list li.just-posted").each((function(){m.push(t(this).attr("id").replace("mpp-activity-",""))})),u={action:"activity_get_older_updates",cookie:e(),page:c,exclude_just_posted:m.join(",")},h=function(t){let e=location.search.split("s=")[1];return e?decodeURIComponent(e.split("&")[0]):null}(),h&&(u.search_terms=h),bp_ajax_request=t.post(ajaxurl,u,(function(e){v.parent().find(".mpp-load-more").removeClass("loading"),t.cookie("bp-activity-oldestpage",c,{path:"/"}),t("ul.mpp-activity-list").append(e.contents),v.parent().hide()}),"json"),!1;if(v.parent().hasClass("load-newest")){a.preventDefault(),v.parent().hide();let e=t.parseHTML(newest_activities);t.each(e,(function(e,a){"LI"===a.nodeName&&t(a).hasClass("just-posted")&&t("#"+t(a).attr("id")).length&&t("#"+t(a).attr("id")).remove()})),t("ul.mpp-activity-list").prepend(newest_activities),newest_activities=""}})),t(document).on("click","div.mpp-activity .activity-read-more a",(function(e){let a,i,n=t(e.target),s=n.parent().attr("id").split("-"),p=s[4],o=s[1];return a="acomment"===o?"mpp-acomment-content":"mpp-activity-inner",i=t("#"+o+"-"+p+" ."+a+":first"),t(n).addClass("loading"),t.post(ajaxurl,{action:"get_single_activity_content",activity_id:p},(function(e){t(i).slideUp(300).html(e).slideDown(300)})),!1})),t("form.mpp-ac-form").hide(),t(document).on("click",".mpp-activity",(function(a){let i,n,s,p,o,r,l,d,c,m,u,h,v,f,_,y,g=t(a.target);return g.hasClass("mpp-acomment-reply")||g.parent().hasClass("mpp-acomment-reply")?(g.parent().hasClass("mpp-acomment-reply")&&(g=g.parent()),i=g.attr("id"),n=i.split("-"),s=n[3],p=g.attr("href").substr(10,g.attr("href").length),o=t("#mpp-ac-form-"+s),o.css("display","none"),o.removeClass("root"),t(".mpp-ac-form").hide(),o.children("div").each((function(){t(this).hasClass("error")&&t(this).hide()})),"comment"!==n[2]?t("#mpp-acomment-"+p).append(o):t("#mpp-activity-"+s+" .mpp-activity-comments").append(o),o.parent().hasClass("mpp-activity-comments")&&o.addClass("root"),o.slideDown(200),t.scrollTo(o,500,{offset:-100,easing:"swing"}),t("#mpp-ac-form-"+n[3]+" textarea").focus(),!1):"mpp_ac_form_submit"==g.attr("name")?(o=g.parents("form"),r=o.parent(),l=o.attr("id").split("-"),r.hasClass("mpp-activity-comments")?c=l[3]:(d=r.attr("id").split("-"),c=d[2]),m=t("#"+o.attr("id")+" textarea"),t("#"+o.attr("id")+" div.error").hide(),g.addClass("loading").prop("disabled",!0),m.addClass("loading").prop("disabled",!0),u={action:"mpp_add_reply",cookie:e(),_wpnonce_new_activity_comment:t("input#_wpnonce_new_activity_comment").val(),comment_id:c,form_id:l[3],content:m.val()},h=t("#_bp_as_nonce_"+c).val(),h&&(u["_bp_as_nonce_"+c]=h),t.post(ajaxurl,u,(function(e){if(g.removeClass("loading"),m.removeClass("loading"),e[0]+e[1]=="-1")o.append(t(e.substr(2,e.length)).hide().fadeIn(200));else{let a=o.parent();o.fadeOut(200,(function(){0===a.children("ul").length&&(a.hasClass("mpp-activity-comments")?a.prepend("<ul></ul>"):a.append("<ul></ul>"));let i=t.trim(e);a.children("ul").append(t(i).hide().fadeIn(200)),o.children("textarea").val(""),a.parent().addClass("has-comments")})),t("#"+o.attr("id")+" textarea").val(""),t("#mpp-activity-"+l[3]+" a.mpp-acomment-reply span").html(Number(t("#mpp-activity-"+l[3]+" a.mpp-acomment-reply span").html())+1);let i=a.find(".show-all").find("a");i&&(v=t("li#mpp-activity-"+l[3]+" a.mpp-acomment-reply span").html(),i.html(_mppStrings.show_x_comments.replace("%d",v)))}t(g).prop("disabled",!1),t(m).prop("disabled",!1)})),!1):g.hasClass("mpp-acomment-delete")?(f=g.attr("href"),_=g.parent().parent(),o=_.parents("div.mpp-activity-comments").children("form"),y=f.split("_wpnonce="),y=y[1],c=f.split("cid="),c=c[1].split("&"),c=c[0],g.addClass("loading"),t(".mpp-activity-comments ul .error").remove(),_.parents(".mpp-activity-comments").append(o),t.post(ajaxurl,{action:"delete_activity_comment",cookie:e(),_wpnonce:y,id:c},(function(e){if(e[0]+e[1]==="-1")_.prepend(t(e.substr(2,e.length)).hide().fadeIn(200));else{let e,a,i,n=t("#"+_.attr("id")+" ul").children("li"),s=0;t(n).each((function(){t(this).is(":hidden")||s++})),_.fadeOut(200,(function(){_.remove()})),e=t("#"+_.parents("#mpp-activity-stream > li").attr("id")+" a.mpp-acomment-reply span"),a=e.html()-(1+s),e.html(a),i=_.siblings(".show-all").find("a"),i&&i.html(_mppStrings.show_x_comments.replace("%d",a)),0===a&&t(_.parents("#mpp-activity-stream > li")).removeClass("has-comments")}})),!1):g.hasClass("spam-activity-comment")?(f=g.attr("href"),_=g.parent().parent(),g.addClass("loading"),t(".mpp-activity-comments ul div.error").remove(),_.parents(".mpp-activity-comments").append(_.parents(".mpp-activity-comments").children("form")),t.post(ajaxurl,{action:"bp_spam_activity_comment",cookie:encodeURIComponent(document.cookie),_wpnonce:f.split("_wpnonce=")[1],id:f.split("cid=")[1].split("&")[0]},(function(e){if(e[0]+e[1]==="-1")_.prepend(t(e.substr(2,e.length)).hide().fadeIn(200));else{let e,a=t("#"+_.attr("id")+" ul").children("li"),i=0;t(a).each((function(){t(this).is(":hidden")||i++})),_.fadeOut(200),e=_.parents("#mpp-activity-stream > li"),t("#"+e.attr("id")+" a.mpp-acomment-reply span").html(t("#"+e.attr("id")+" a.mpp-acomment-reply span").html()-(1+i))}})),!1):g.parent().hasClass("show-all")?(g.parent().addClass("loading"),setTimeout((function(){g.parent().parent().children("li").fadeIn(200,(function(){g.parent().remove()}))}),600),!1):g.hasClass("mpp-ac-reply-cancel")?(t(g).closest(".mpp-ac-form").slideUp(200),!1):void 0})),t(document).on("keydown",(function(e){let a;if((e=e||window.event).target?a=e.target:e.srcElement&&(a=e.srcElement),3===a.nodeType&&(a=a.parentNode),!0!==e.ctrlKey&&!0!==e.altKey&&!0!==e.metaKey)return 27===(e.keyCode?e.keyCode:e.which)&&"TEXTAREA"===a.tagName&&t(a).hasClass("mpp-ac-input")?(t(a).parent().parent().parent().slideUp(200),!1):void 0}))}))}(e())}()}();
//# sourceMappingURL=mpp-media-activity.js.map