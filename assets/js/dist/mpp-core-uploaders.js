!function(){"use strict";var e,p,o={567:function(e){e.exports=window.jQuery},821:function(e){e.exports=window.mpp}},t={};function l(e){var p=t[e];if(void 0!==p)return p.exports;var n=t[e]={exports:{}};return o[e](n,n.exports,l),n.exports}l.n=function(e){var p=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(p,{a:p}),p},l.d=function(e,p){for(var o in p)l.o(p,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:p[o]})},l.o=function(e,p){return Object.prototype.hasOwnProperty.call(e,p)},e=l(567),p=l.n(e),l(821),function(e){const p=_.clone(_mppUploadSettings);e(document).ready((function(){const o=mpp.mediaUtils;let t=p.params.context,l=0;e("#mpp-context").length&&(t=e("#mpp-context").val()),e("#mpp-upload-gallery-id").length&&(l=e("#mpp-upload-gallery-id").val());let n=o.getExtensions(p.current_type),r=new mpp.Uploader("gallery",{el:"#mpp-upload-dropzone-gallery",url:p.url,params:_.extend({},p.params,{context:t,gallery_id:l}),allowedFileTypes:o.prepareExtensions(n),addRemoveLinks:!0});r.init(),o.setupUploaderFileTypes(r,p.current_type);let a=0,d=null;e(".mpp-upload-shortcode #mpp-shortcode-upload-gallery-id").length&&(a=e(".mpp-upload-shortcode #mpp-shortcode-upload-gallery-id").val()),e(".mpp-upload-shortcode .mpp-uploading-media-type").length&&(d=o.getExtensions(e(".mpp-upload-shortcode .mpp-uploading-media-type").first().val()));let i=new mpp.Uploader("shortcode",{el:"#mpp-upload-dropzone-shortcode",url:p.url,params:_.extend({},p.params,{context:"shortcode",gallery_id:a}),allowedFileTypes:d,addRemoveLinks:!0});if(i.init(),a||i.disable(),i.hideHelpMessages(),e("#mpp-upload-dropzone-shortcode").length){var s=e("#mpp-upload-dropzone-shortcode").parents(".mpp-upload-shortcode").find(".mpp-uploading-media-type");s.length&&(o.setupUploaderFileTypes(i,s.val()),i.refresh())}e(".mpp-upload-shortcode #mpp-shortcode-upload-gallery-id").on("change",(function(){let p=e(this),t=p.find("option:selected");p.val()&&("0"!==p.val()?i.enable():i.disable()),i.setParam("gallery_id",p.val()),o.setupUploaderFileTypes(i,t.data("mpp-type")),i.refresh()}));let u=e(".mpp-editable-cover").first(),c=e("#mpp-cover-uploading"),m=u.find(".mpp-gallery-id").val(),f=u.find(".mpp-parent-id").val(),h=u.find(".mpp-parent-type").val();new mpp.Uploader("cover_uploader",{el:".mpp-editable-cover",clickable:"#mpp-cover-upload",url:p.url,params:_.extend({},p.params,{context:"cover",action:"mpp_upload_cover","mpp-parent-id":f,"mpp-gallery-id":m,"mpp-parent-type":h}),allowedFileTypes:o.prepareExtensions(o.getExtensions("photo")),addRemoveLinks:!0,addedfile:function(e){c.show()},thumbnail:function(e,p){},uploadprogress:function(e,p,o){},error:function(){mpp.notify("Error")},events:{success:function(e,p){let o=(p=p.data).sizes&&p.sizes.thumbnail?p.sizes.thumbnail.url:null;o&&u.find(".mpp-cover-image").attr("src",o)},complete:function(){c.hide()}}}).init(),e(document).on("click","#mpp-cover-upload",(function(){return!1}))}))}(p())}();
//# sourceMappingURL=mpp-core-uploaders.js.map