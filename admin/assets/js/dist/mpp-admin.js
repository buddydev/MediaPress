!function(){"use strict";var e,n,p={567:function(e){e.exports=window.jQuery},821:function(e){e.exports=window.mpp}},o={};function a(e){var n=o[e];if(void 0!==n)return n.exports;var t=o[e]={exports:{}};return p[e](t,t.exports,a),t.exports}a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,{a:n}),n},a.d=function(e,n){for(var p in n)a.o(n,p)&&!a.o(e,p)&&Object.defineProperty(e,p,{enumerable:!0,get:n[p]})},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},e=a(567),n=a.n(e),a(821),function(e){const n=_.clone(_mppUploadSettings),p=mpp.mediaUtils;e(document).ready((function(e){if(e("#mpp-edit-media-bulk-action").get(0)&&e("#mpp-edit-media-bulk-action").val(""),e("form#post").on("submit",(function(){e(this).find("#mpp-admin-edit-panels").remove()})),n.current_type){var o=e("#menu-posts-mpp-gallery").find('ul li a[href*="mpp-gallery-type='+_mppUploadSettings.current_type+'"]');o.parent("li")&&(e("#menu-posts-mpp-gallery").find("ul li.wp-first-item").removeClass("current"),o.parent().addClass("current"))}mpp.notify=function(n,p){var o="updated";void 0!==p&&(o="error"),e("#message").remove(),e("#mpp-admin-edit-panels .mpp-admin-active-panel").prepend('<div id="message" class="bp-template-notice mpp-template-notice '+o+'"><p>'+n+"</p></div>").show()};let a=e("#post_ID").val();function t(){let e=new mpp.Uploader("admin_uploader",{el:"#mpp-upload-dropzone-admin",url:n.url,params:_.extend({},n.params,{context:"admin",gallery_id:a}),allowedFileTypes:p.prepareExtensions(null),addRemoveLinks:!0,events:{success:function(e,n){r()},complete:function(){}}});e.init(),mpp.mediaUtils.setupUploaderFileTypes(e,n.current_type)}function i(){void 0!==e.fn.sortable&&e("#mpp-uploaded-media-list-admin>ul").sortable({opacity:.6,cursor:"move",stop:function(n,p){!function(n){if(n){d();var p=n+"&action=mpp_reorder_media&_wpnonce="+e("#_mpp_manage_gallery_nonce").val();e.post(ajaxurl,p,(function(e){void 0!==e.success?mpp.notify(e.message):mpp.notify(e.message,"error"),l()}))}}(e("#mpp-uploaded-media-list-admin>ul").sortable("serialize",{key:"mpp-media-ids[]"}))}})}function r(){!function(n,p,o,a){o||(o=e("#post_ID").val()),a||(a=e("#_mpp_manage_gallery_nonce").val()),n=e(n);var t=e("#mpp-loader-wrapper").clone();n.find("#mpp-show-loader").remove(),n.prepend('<ul id="mpp-show-loader"></ul>'),n.find("#mpp-show-loader").append(t.show()),e.post(ajaxurl,{action:"mpp_reload_bulk_edit",gallery_id:o,_wpnonce:a},(function(e){void 0!==e.success?(n.html(e.contents),void 0!==e.message&&mpp.notify(e.message)):mpp.notify(e.message,1),n.find("#mpp-show-loader").remove()}),"json")}("#mpp-admin-edit-panel-tab-edit-media")}function m(){var n="#mpp-admin-edit-panel-tab-add-media",p=e("#post_ID").val(),o=e("#_mpp_manage_gallery_nonce").val();n=e(n);var a=e("#mpp-loader-wrapper").clone();n.find("#mpp-show-loader").remove(),n.prepend('<ul id="mpp-show-loader"></ul>'),n.find("#mpp-show-loader").append(a.show()),e.post(ajaxurl,{action:"mpp_reload_add_media",gallery_id:p,_wpnonce:o},(function(e){void 0!==e.success?(n.html(e.contents),t(),i(),void 0!==e.message&&mpp.notify(e.message)):mpp.notify(e.message,1),n.find("#mpp-show-loader").remove()}),"json")}function d(){var n=e("#mpp-loader-wrapper").clone();e("#mpp-show-loader").remove(),e(".mpp-admin-active-panel").prepend('<ul id="mpp-show-loader"></ul>'),e("#mpp-show-loader").append(n.show())}function l(){e("#mpp-show-loader").remove()}t(),e(document).on("click",".mpp-uploading-media-list .mpp-delete-uploaded-media-item",(function(){var n=e(this),p=e(n.parent()),o=p.data("media-id");if(!o)return!1;d();var a=e("#_mpp_manage_gallery_nonce").val();return e.post(ajaxurl,{action:"mpp_delete_media",media_id:o,cookie:encodeURIComponent(document.cookie),_wpnonce:a},(function(e){void 0!==e.success?(p.remove(),mpp.notify(e.message)):mpp.notify(e.message),l()}),"json"),!1})),i(),e(document).on("click","#mpp-edit-media-submit, #bulk-action-apply",(function(){if("delete"===e("#mpp-edit-media-bulk-action").val()&&!confirm(_mppStrings.bulk_delete_warning))return!1;d();var n=e("#post_ID").val(),p=e(e("form#post").find("#mpp-media-bulkedit-div")).find("input, textarea, select").serialize();return p=p+"&gallery_id="+n+"&action=mpp_bulk_update_media&_wpnonce="+e("#_mpp_manage_gallery_nonce").val(),e.post(ajaxurl,p,(function(n){void 0!==n.success?(e("#mpp-admin-edit-panel-tab-edit-media").html(n.contents),mpp.notify(n.message),m()):mpp.notify(n.message,"error"),l()})),!1})),e(document).on("click","#mpp-cover-delete",(function(){var n=e("#post_ID").val();if(!n)return!1;var p=e("#_mpp_manage_gallery_nonce").val();return d(),e.post(ajaxurl,{action:"mpp_delete_gallery_cover",gallery_id:n,_wpnonce:p,cookie:encodeURIComponent(document.cookie)},(function(p){void 0!==p.success?(e("#mpp-cover-"+n).find(".mpp-cover-image").attr("src",p.cover),mpp.notify(p.message)):mpp.notify(p.message,"error"),l()}),"json"),!1})),e(document).on("click","#mpp-update-gallery-details",(function(){var n=e(e("form#post").find("#mpp-gallery-edit-form")).find("input, textarea, select").serialize();return n=n+"&action=mpp_update_gallery_details&_wpnonce="+e("#_mpp_manage_gallery_nonce").val(),d(),e.post(ajaxurl,n,(function(e){void 0!==e.success?mpp.notify(e.message):mpp.notify(e.message,"error"),l()}),"json"),!1})),e(document).on("click","#mpp-reload-bulk-edit-tab",(function(){return r(),!1})),e(document).on("click","#mpp-reload-add-media-tab",(function(){return m(),!1}))}))}(n())}();
//# sourceMappingURL=mpp-admin.js.map